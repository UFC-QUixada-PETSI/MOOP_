<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@tabuleiro: Jogo de tabuleiro e armadilhas</title>
    <style>
        body { font-family: sans-serif; line-height: 1.6; margin: 20px; }
        pre { background-color: #f4f4f4; padding: 10px; border-radius: 5px; overflow-x: auto; }
        code { font-family: monospace; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        /* Estilos básicos para o destaque de sintaxe (gerado pelo pygments via pymdownx.highlight) */
        .highlight .hll { background-color: #ffffcc }
        .highlight .c { color: #999988; font-style: italic } /* Comment */
        .highlight .err { color: #a61717; background-color: #e3d2d2 } /* Error */
        .highlight .k { color: #000000; font-weight: bold } /* Keyword */
        .highlight .o { color: #000000; font-weight: bold } /* Operator */
        .highlight .ch { color: #999988; font-style: italic } /* Comment.Hashbang */
        .highlight .cm { color: #999988; font-style: italic } /* Comment.Multiline */
        .highlight .cp { color: #999999; font-weight: bold; font-style: italic } /* Comment.Preproc */
        .highlight .cpf { color: #999988; font-style: italic } /* Comment.PreprocFile */
        .highlight .c1 { color: #999988; font-style: italic } /* Comment.Single */
        .highlight .cs { color: #999999; font-weight: bold; font-style: italic } /* Comment.Special */
        .highlight .gd { color: #000000; background-color: #ffdddd } /* Generic.Deleted */
        .highlight .ge { color: #000000; font-style: italic } /* Generic.Emph */
        .highlight .gr { color: #aa0000 } /* Generic.Error */
        .highlight .gh { color: #999999 } /* Generic.Heading */
        .highlight .gi { color: #000000; background-color: #ddffdd } /* Generic.Inserted */
        .highlight .go { color: #888888 } /* Generic.Output */
        .highlight .gp { color: #555555 } /* Generic.Prompt */
        .highlight .gs { font-weight: bold } /* Generic.Strong */
        .highlight .gu { color: #aaaaaa } /* Generic.Subheading */
        .highlight .gt { color: #aa0000 } /* Generic.Traceback */
        .highlight .kc { color: #000000; font-weight: bold } /* Keyword.Constant */
        .highlight .kd { color: #000000; font-weight: bold } /* Keyword.Declaration */
        .highlight .kn { color: #000000; font-weight: bold } /* Keyword.Namespace */
        .highlight .kp { color: #000000; font-weight: bold } /* Keyword.Pseudo */
        .highlight .kr { color: #000000; font-weight: bold } /* Keyword.Reserved */
        .highlight .kt { color: #445588; font-weight: bold } /* Keyword.Type */
        .highlight .m { color: #009999 } /* Literal.Number */
        .highlight .s { color: #dd1144 } /* Literal.String */
        .highlight .na { color: #008080 } /* Name.Attribute */
        .highlight .nb { color: #0086B3 } /* Name.Builtin */
        .highlight .nc { color: #445588; font-weight: bold } /* Name.Class */
        .highlight .no { color: #008080 } /* Name.Constant */
        .highlight .nd { color: #3c5d5d; font-weight: bold } /* Name.Decorator */
        .highlight .ni { color: #800080 } /* Name.Entity */
        .highlight .ne { color: #990000; font-weight: bold } /* Name.Exception */
        .highlight .nf { color: #990000; font-weight: bold } /* Name.Function */
        .highlight .nl { color: #990000; font-weight: bold } /* Name.Label */
        .highlight .nn { color: #555555; font-weight: bold } /* Name.Namespace */
        .highlight .nx { color: #990000; font-weight: bold } /* Name.Other */
        .highlight .py { color: #009999 } /* Name.Property */
        .highlight .p { color: #000000 } /* Name.Punctuation */
        .highlight .nv { color: #008080 } /* Name.Variable */
        .highlight .ow { color: #000000; font-weight: bold } /* Operator.Word */
        .highlight .w { color: #bbbbbb } /* Text.Whitespace */
        .highlight .mf { color: #009999 } /* Literal.Number.Float */
        .highlight .mh { color: #009999 } /* Literal.Number.Hex */
        .highlight .mi { color: #009999 } /* Literal.Number.Integer */
        .highlight .mo { color: #009999 } /* Literal.Number.Oct */
        .highlight .sb { color: #dd1144 } /* Literal.String.Backtick */
        .highlight .sc { color: #dd1144 } /* Literal.String.Char */
        .highlight .sd { color: #dd1144 } /* Literal.String.Doc */
        .highlight .s2 { color: #dd1144 } /* Literal.String.Double */
        .highlight .se { color: #dd1144 } /* Literal.String.Escape */
        .highlight .sh { color: #dd1144 } /* Literal.String.Heredoc */
        .highlight .si { color: #dd1144 } /* Literal.String.Interpol */
        .highlight .sx { color: #dd1144 } /* Literal.String.Other */
        .highlight .sr { color: #009926 } /* Literal.String.Regex */
        .highlight .s1 { color: #dd1144 } /* Literal.String.Single */
        .highlight .ss { color: #dd1144 } /* Literal.String.Symbol */
        .highlight .bp { color: #0086B3 } /* Name.Builtin.Pseudo */
        .highlight .vc { color: #008080 } /* Name.Variable.Class */
        .highlight .vg { color: #008080 } /* Name.Variable.Global */
        .highlight .vi { color: #008080 } /* Name.Variable.Instance */
        .highlight .il { color: #009999 } /* Literal.Number.Integer.Long */
    </style>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
</head>
<body>
<h1>Jogo de tabuleiro e armadilhas</h1>
<!-- toch -->
<table>
<thead>
<tr>
<th><a href="#intro">Intro</a></th>
<th><a href="#draft">Draft</a></th>
<th><a href="#guide">Guide</a></th>
<th><a href="#shell">Shell</a></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<!-- toch -->

<p><img alt="cover" src="https://raw.githubusercontent.com/qxcodepoo/arcade/master/base/tabuleiro/cover.jpg" /></p>
<h2>Intro</h2>
<p>Nosso jogo consiste em um tabuleiro contendo uma trilha de quadrados e um conjunto de peças coloridas. No início do jogo, cada jogador recebe uma peça; todas as peças são inicialmente posicionadas na posição 0 da trilha.</p>
<p>O jogo prossegue em rodadas. Em cada rodada, os jogadores rolam um D20 (dado de 20 faces) e movem suas peças para frente um número de quadrados igual ao resultado obtido pelos dados. Os jogadores rolam os dados sempre na mesma ordem (jogador A, depois jogador B, etc.) nas rodadas.</p>
<p>A maioria dos quadrados no tabuleiro são quadrados simples, mas alguns são “armadilhas”. Se a peça de um jogador cair em um quadrado da armadilha no final do movimento do jogador. O jogador ficará preso na armadilha até que na sua rodada jogue um número par se libertando da armadilha. Ao rolar um número par e se libertar da armadilha, sua peça não se move nessa rodada, mas na próxima poderá se mover normalmente.</p>
<p><img alt="_" src="https://raw.githubusercontent.com/qxcodepoo/arcade/master/base/tabuleiro/tabuleiro.png" /></p>
<p>Haverá exatamente três armadilhas na trilha.</p>
<p>O vencedor do jogo é o jogador cuja peça chega primeiro ao final da trilha. O fim da trilha é depois da última casa do tabuleiro. Considere, por exemplo, a placa da figura acima, que tem quadrados numerados de 1 a 48. No início, as peças são posicionadas no local marcado como 'Início', ou seja, antes do quadrado número 1. Portanto, se um jogador rolar um 7, sua peça é posicionada na casa número 7 no final da primeira rodada do jogo.
Além disso, se a peça de um jogador estiver posicionada na casa 41, o jogador precisa de um resultado de rolagem de pelo menos 8 para chegar ao final da trilha e ganhar o jogo. Observe também que não haverá empate no jogo.</p>
<hr />
<p>Questão adaptada da maratona ACM 2003 por @WladimirTavares</p>
<hr />
<h2>Draft</h2>
<ul>
<li><a href="https://github.com/qxcodepoo/arcade/blob/master/base/tabuleiro/.cache/draft.ts">solver.ts</a></li>
<li><a href="https://github.com/qxcodepoo/arcade/blob/master/base/tabuleiro/.cache/draft.cpp">solver.cpp</a></li>
</ul>
<h2>Guide</h2>
<p><img alt="diagrama" src="https://raw.githubusercontent.com/qxcodepoo/arcade/master/base/tabuleiro/diagrama.png" /></p>
<!-- load diagrama.puml fenced=ts:filter -->

<div class="language-ts highlight"><pre><span></span><code><span class="kd">@startuml</span>

<span class="nx">skinparam</span><span class="w"> </span><span class="nx">defaultFontName</span><span class="w"> </span><span class="s2">&quot;Source Code Pro&quot;</span>
<span class="nx">skinparam</span><span class="w"> </span><span class="nx">dpi</span><span class="w"> </span><span class="mf">150</span>
<span class="nx">left</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">right</span><span class="w"> </span><span class="nx">direction</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">Player</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w">  </span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">pos</span><span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="kt">number</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">free</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span>
<span class="w">  </span><span class="nx">__</span>
<span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="nx">Player</span><span class="p">(</span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span>
<span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="nx">isFree</span><span class="p">()</span><span class="w">   </span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span>
<span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="nx">toString</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">string</span>
<span class="w">  </span><span class="nx">__</span>
<span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="nx">getLabel</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span>
<span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="nx">getPos</span><span class="p">()</span><span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="kt">number</span>
<span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="nx">setPos</span><span class="p">(</span><span class="nx">pos</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span>
<span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="nx">setFree</span><span class="p">(</span><span class="nx">free</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">Board</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">trapList</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Array</span><span class="o">&lt;</span><span class="kt">number</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">players</span><span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="kt">Array</span><span class="o">&lt;</span><span class="nx">Player</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">running</span><span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">boardSize</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span>
<span class="w">  </span><span class="nx">__</span>
<span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="nx">Board</span><span class="p">(</span><span class="nx">nPlayers</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="nx">boardSize</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span>
<span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="nx">toString</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span>
<span class="w">  </span><span class="nx">__</span>
<span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="nx">addTrap</span><span class="w"> </span><span class="p">(</span><span class="nx">pos</span><span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span>
<span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="nx">rollDice</span><span class="p">(</span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span>
<span class="p">}</span>

<span class="nx">Board</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="w"> </span><span class="o">*--</span><span class="w">  </span><span class="s2">&quot;2..*&quot;</span><span class="w"> </span><span class="nx">Player</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">has</span>
<span class="kd">@enduml</span>
</code></pre></div>
<!-- load -->

<hr />
<h2>Shell</h2>
<div class="language-s highlight"><pre><span></span><code><span class="c1">#TEST_CASE init</span>
<span class="o">$</span><span class="n">init</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">10</span>
<span class="o">$</span><span class="n">show</span>
<span class="n">player1</span><span class="o">:</span><span class="w"> </span><span class="m">1</span><span class="n">..........</span>
<span class="n">player2</span><span class="o">:</span><span class="w"> </span><span class="m">2</span><span class="n">..........</span>
<span class="n">traps__</span><span class="o">:</span><span class="w"> </span><span class="n">...........</span>

<span class="o">$</span><span class="n">addTrap</span><span class="w"> </span><span class="m">2</span>
<span class="o">$</span><span class="n">addTrap</span><span class="w"> </span><span class="m">4</span>
<span class="o">$</span><span class="n">addTrap</span><span class="w"> </span><span class="m">8</span>
<span class="o">$</span><span class="n">show</span>
<span class="n">player1</span><span class="o">:</span><span class="w"> </span><span class="m">1</span><span class="n">..........</span>
<span class="n">player2</span><span class="o">:</span><span class="w"> </span><span class="m">2</span><span class="n">..........</span>
<span class="n">traps__</span><span class="o">:</span><span class="w"> </span><span class="n">..x.x...x..</span>

<span class="c1">#TEST_CASE move</span>
<span class="o">$</span><span class="n">roll</span><span class="w"> </span><span class="m">1</span>
<span class="n">player1</span><span class="w"> </span><span class="n">andou</span><span class="w"> </span><span class="n">para</span><span class="w"> </span><span class="m">1</span>

<span class="c1">#TEST_CASE trap</span>
<span class="o">$</span><span class="n">roll</span><span class="w"> </span><span class="m">2</span>
<span class="n">player2</span><span class="w"> </span><span class="n">andou</span><span class="w"> </span><span class="n">para</span><span class="w"> </span><span class="m">2</span>
<span class="n">player2</span><span class="w"> </span><span class="n">caiu</span><span class="w"> </span><span class="n">em</span><span class="w"> </span><span class="n">uma</span><span class="w"> </span><span class="n">armadilha</span>

<span class="c1">#TEST_CASE show</span>
<span class="o">$</span><span class="n">show</span>
<span class="n">player1</span><span class="o">:</span><span class="w"> </span><span class="n">.</span><span class="m">1</span><span class="n">.........</span>
<span class="n">player2</span><span class="o">:</span><span class="w"> </span><span class="n">..2........</span>
<span class="n">traps__</span><span class="o">:</span><span class="w"> </span><span class="n">..x.x...x..</span>

<span class="c1">#TEST_CASE keep trapped</span>
<span class="o">$</span><span class="n">roll</span><span class="w"> </span><span class="m">4</span>
<span class="n">player1</span><span class="w"> </span><span class="n">andou</span><span class="w"> </span><span class="n">para</span><span class="w"> </span><span class="m">5</span>
<span class="o">$</span><span class="n">roll</span><span class="w"> </span><span class="m">3</span>
<span class="n">player2</span><span class="w"> </span><span class="n">continua</span><span class="w"> </span><span class="n">preso</span>

<span class="o">$</span><span class="n">show</span>
<span class="n">player1</span><span class="o">:</span><span class="w"> </span><span class="n">.....1.....</span>
<span class="n">player2</span><span class="o">:</span><span class="w"> </span><span class="n">..2........</span>
<span class="n">traps__</span><span class="o">:</span><span class="w"> </span><span class="n">..x.x...x..</span>

<span class="c1">#TEST_CASE trap</span>
<span class="o">$</span><span class="n">roll</span><span class="w"> </span><span class="m">3</span>
<span class="n">player1</span><span class="w"> </span><span class="n">andou</span><span class="w"> </span><span class="n">para</span><span class="w"> </span><span class="m">8</span>
<span class="n">player1</span><span class="w"> </span><span class="n">caiu</span><span class="w"> </span><span class="n">em</span><span class="w"> </span><span class="n">uma</span><span class="w"> </span><span class="n">armadilha</span>

<span class="c1">#TEST_CASE release</span>
<span class="o">$</span><span class="n">roll</span><span class="w"> </span><span class="m">6</span>
<span class="n">player2</span><span class="w"> </span><span class="n">se</span><span class="w"> </span><span class="n">libertou</span>

<span class="o">$</span><span class="n">show</span>
<span class="n">player1</span><span class="o">:</span><span class="w"> </span><span class="n">........1..</span>
<span class="n">player2</span><span class="o">:</span><span class="w"> </span><span class="n">..2........</span>
<span class="n">traps__</span><span class="o">:</span><span class="w"> </span><span class="n">..x.x...x..</span>

<span class="c1">#TEST_CASE win</span>
<span class="o">$</span><span class="n">roll</span><span class="w"> </span><span class="m">2</span>
<span class="n">player1</span><span class="w"> </span><span class="n">se</span><span class="w"> </span><span class="n">libertou</span>
<span class="o">$</span><span class="n">roll</span><span class="w"> </span><span class="m">10</span>
<span class="n">player2</span><span class="w"> </span><span class="n">ganhou</span>

<span class="c1">#TEST_CASE boundary</span>
<span class="o">$</span><span class="n">show</span>
<span class="n">player1</span><span class="o">:</span><span class="w"> </span><span class="n">........1..</span>
<span class="n">player2</span><span class="o">:</span><span class="w"> </span><span class="n">..........2</span>
<span class="n">traps__</span><span class="o">:</span><span class="w"> </span><span class="n">..x.x...x..</span>

<span class="c1">#TEST_CASE game over</span>
<span class="o">$</span><span class="n">roll</span><span class="w"> </span><span class="m">1</span>
<span class="n">game</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">over</span>
<span class="o">$</span><span class="n">end</span>
</code></pre></div>
</body>
</html>
