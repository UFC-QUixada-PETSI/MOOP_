{
    "title": "@produto: @produto - Padr\u00e3o Composite e Decorator",
    "description": "# @produto - Padr\u00e3o Composite e Decorator\n\nPadr\u00f5es de projeto s\u00e3o solu\u00e7\u00f5es para problemas comuns que encontramos ao projetar um sistema. Eles s\u00e3o como receitas de bolo que podemos aplicar em nossos projetos para resolver problemas recorrentes. Os padr\u00f5es de projeto s\u00e3o divididos em tr\u00eas categorias: padr\u00f5es de cria\u00e7\u00e3o, padr\u00f5es estruturais e padr\u00f5es comportamentais.\n\nVamos trabalhar os conceitos de dois padr\u00f5es de projeto: Composite e Decorator.\n\n## Composite\n\nO padr\u00e3o Composite \u00e9 um padr\u00e3o estrutural que permite que objetos sejam agrupados de forma a trat\u00e1-los como se fossem um \u00fanico objeto. Ele permite que clientes tratem objetos individuais e composi\u00e7\u00f5es de objetos de maneira uniforme.\n\n## Decorator\n\nO padr\u00e3o Decorator \u00e9 um padr\u00e3o estrutural que permite que responsabilidades sejam adicionadas a um objeto dinamicamente. Ele permite que um objeto seja envolvido por outros objetos que adicionam comportamento a ele. \u00c9 frequentemente usado para adicionar responsabilidades a objetos sem que isso cause um efeito colateral para os outros objetos.\n\n### Exemplo\n\nVamos modelar um sistema de vendas de produtos. O sistema deve permitir que sejam cadastrados produtos simples e pacotes. Pacotes s\u00e3o o agrupamento de produtos que devem ser vendidos juntos. Produtos simples s\u00e3o produtos que n\u00e3o cont\u00eam outros produtos. Pacotes e produtos simples devem ser tratados de forma uniforme. Al\u00e9m disso, deve ser poss\u00edvel criar produtos ou pacotes com desconto, em quaisquer tipo de montagem ou configura\u00e7\u00e3o.\n\n### Descri\u00e7\u00e3o\n\n#### Interface IProduct\n\nDefine os m\u00e9todos que todas as classes de produto devem implementar.\n\n- `getPrice()`: Retorna o pre\u00e7o do produto.\n- `getLabel()`: Retorna o r\u00f3tulo do produto.\n\n#### Classe Product\n\nImplementa a interface `IProduct` e representa um produto simples.\n\n- **Atributos:**\n  - `name`: Nome do produto.\n  - `price`: Pre\u00e7o do produto.\n- **M\u00e9todos:**\n  - `constructor(name: string, price: number)`: Inicializa os atributos `name` e `price`.\n  - `getPrice()`: Retorna o pre\u00e7o do produto.\n  - `getLabel()`: Retorna o nome do produto.\n\n#### Classe Bundle\n\nImplementa a interface `IProduct` e representa um pacote de produtos (padr\u00e3o composite).\n\n- **Atributos:**\n  - `products`: Lista de produtos que comp\u00f5em o pacote.\n- **M\u00e9todos:**\n  - `constructor(products: IProduct[] = [])`: Inicializa a lista de produtos.\n  - `addProduct(product: IProduct)`: Adiciona um produto ao pacote.\n  - `getPrice()`: Retorna o pre\u00e7o total do pacote.\n  - `getLabel()`: Retorna uma string com os nomes dos produtos no pacote. Exemplo: `[bermuda, camisa, bone]`.\n\n#### Classe DiscountedProduct\n\nImplementa a interface `IProduct` e representa um produto com desconto (padr\u00e3o decorator).\n\n- **Atributos:**\n  - `product`: O produto original.\n  - `discount`: O percentual de desconto.\n- **M\u00e9todos:**\n  - `constructor(product: IProduct, discount: number)`: Inicializa os atributos `product` e `discount`.\n  - `getPrice()`: Retorna o pre\u00e7o do produto com desconto.\n  - `getLabel()`: Retorna uma string com o nome do produto e o desconto aplicado. Exemplo: `camisa(10% OFF)`.\n\n#### Classe Manager\n\nServe para gerenciar a cria\u00e7\u00e3o e manipula\u00e7\u00e3o dos produtos.\n\n- **Atributos:**\n  - `products`: Array para armazenar os produtos.\n- **M\u00e9todos:**\n  - `constructor()`: Inicializa o array `products`.\n  - `addProduct(name: string, price: number)`: Adiciona um novo produto ao array.\n  - `addBundle(indexes: number[])`: Cria um novo pacote com base nos \u00edndices fornecidos e adiciona ao array.\n  - `addDiscount(index: number, discount: number)`: Adiciona um desconto a um produto existente.\n  - `toString()`: Retorna uma string com informa\u00e7\u00f5es sobre todos os produtos no array.\n\n## Guide\n\n![Diagrama de Classes](https://raw.githubusercontent.com/qxcodepoo/arcade/master/base/produto/diagrama.png)\n\n<!-- load diagrama.puml fenced=ts:filter -->\n\n```ts\n\n@startuml\n\nskinparam defaultFontName \"Source Code Pro\"\nskinparam dpi 150\n\n\n\n' Interface que define a responsabilidade de um produto\ninterface IProduct {\n  + getPrice(): double\n  + getLabel(): String\n}\n\n' Produto simples\nclass Product {\n  - name: String\n  - price: double\n  + Product(name: String, price: double)\n  + getPrice(): double\n  + getLabel(): String\n}\n\n' Conjunto de produtos que s\u00e3o vendidos juntos\nclass Bundle {\n  - products: List<IProduct>\n  + Bundle(products: List<IProduct>)\n  + addProduct(product: IProduct): void\n  \n  ' A soma dos pre\u00e7os dos produtos individuais\n  + getPrice(): double\n\n  ' A concatena\u00e7\u00e3o dos nomes dos produtos individuais no formato [nome1, nome2, nome3]\n  + getLabel(): String\n}\n\n' Produto com desconto\nclass DiscountedProduct {\n  - product: IProduct\n\n  ' Valor de 0 a 100\n  - discount: double\n\n  + DiscountedProduct(product: IProduct, discount: double)\n  \n  ' O valor do produto original - o desconto\n  + getPrice(): double\n\n  ' O label do produto original com o desconto no formato\n  ' label_original (desconto %OFF)\n  + getLabel(): String\n}\n\n' Gerenciador de produtos\nclass ProductManager {\n  - products: List<IProduct>\n  + ProductManager()\n\n  ' Adiciona um produto simples\n  + addProduct(label: String, price: double): void\n\n  ' Cria um pacote a partir de todos os \u00edndices\n  + addPackage(indexes: List<int>): void\n\n  ' Adiciona um desconto a um produto dado o \u00edndice do produto\n  + addDiscount(index: int, discount: double): void\n\n  ' Mostra os \u00edndices dos produtos, seus r\u00f3tulos e pre\u00e7os\n  + toString(): String\n}\n\n\nIProduct <|.. Product\nIProduct <|.. Bundle\nIProduct <|.. DiscountedProduct\nProductManager *--> IProduct\n@enduml\n\n```\n\n<!-- load -->\n\n## Shell\n\n```bash\n#TEST_CASE criando produto simples\n\n$add camisa 40\n$add bermuda 30\n$add bone 20\n$show\n00:camisa:40.00\n01:bermuda:30.00\n02:bone:20.00\n\n#TEST_CASE criando pacote\n$addPacote 0 2\n$addPacote 1 1\n$addPacote 0 1 2\n$show\n00:camisa:40.00\n01:bermuda:30.00\n02:bone:20.00\n03:[camisa, bone]:60.00\n04:[bermuda, bermuda]:60.00\n05:[camisa, bermuda, bone]:90.00\n\n#TEST_CASE criando produto com desconto\n$addDesconto 0 10\n$addDesconto 3 20\n$addDesconto 4 15\n\n$show\n00:camisa:40.00\n01:bermuda:30.00\n02:bone:20.00\n03:[camisa, bone]:60.00\n04:[bermuda, bermuda]:60.00\n05:[camisa, bermuda, bone]:90.00\n06:camisa(10% OFF):36.00\n07:[camisa, bone](20% OFF):48.00\n08:[bermuda, bermuda](15% OFF):51.00\n\n#TEST_CASE finalizando\n\n# [camisa, bone](https://github.com/qxcodepoo/arcade/blob/master/base/produto/20%) + [bermuda, bermuda](https://github.com/qxcodepoo/arcade/blob/master/base/produto/15%)\n$addPacote 7 8\n$addDesconto 9 10\n$show\n00:camisa:40.00\n01:bermuda:30.00\n02:bone:20.00\n03:[camisa, bone]:60.00\n04:[bermuda, bermuda]:60.00\n05:[camisa, bermuda, bone]:90.00\n06:camisa(10% OFF):36.00\n07:[camisa, bone](20% OFF):48.00\n08:[bermuda, bermuda](15% OFF):51.00\n09:[[camisa, bone](20% OFF), [bermuda, bermuda](15% OFF)]:99.00\n10:[[camisa, bone](20% OFF), [bermuda, bermuda](15% OFF)](10% OFF):89.10\n\n$end\n```\n",
    "upload": [
        {
            "name": "vpl_evaluate.cases",
            "contents": ">>>>>>>> INSERT criando produto simples\nadd camisa 40\nadd bermuda 30\nadd bone 20\nshow\nend\n======== EXPECT\n$add camisa 40\n$add bermuda 30\n$add bone 20\n$show\n00:camisa:40.00\n01:bermuda:30.00\n02:bone:20.00\n$end\n<<<<<<<< FINISH\n\n\n>>>>>>>> INSERT criando pacote\nadd camisa 40\nadd bermuda 30\nadd bone 20\nshow\naddPacote 0 2\naddPacote 1 1\naddPacote 0 1 2\nshow\nend\n======== EXPECT\n$add camisa 40\n$add bermuda 30\n$add bone 20\n$show\n00:camisa:40.00\n01:bermuda:30.00\n02:bone:20.00\n$addPacote 0 2\n$addPacote 1 1\n$addPacote 0 1 2\n$show\n00:camisa:40.00\n01:bermuda:30.00\n02:bone:20.00\n03:[camisa, bone]:60.00\n04:[bermuda, bermuda]:60.00\n05:[camisa, bermuda, bone]:90.00\n$end\n<<<<<<<< FINISH\n\n\n>>>>>>>> INSERT criando produto com desconto\nadd camisa 40\nadd bermuda 30\nadd bone 20\nshow\naddPacote 0 2\naddPacote 1 1\naddPacote 0 1 2\nshow\naddDesconto 0 10\naddDesconto 3 20\naddDesconto 4 15\nshow\nend\n======== EXPECT\n$add camisa 40\n$add bermuda 30\n$add bone 20\n$show\n00:camisa:40.00\n01:bermuda:30.00\n02:bone:20.00\n$addPacote 0 2\n$addPacote 1 1\n$addPacote 0 1 2\n$show\n00:camisa:40.00\n01:bermuda:30.00\n02:bone:20.00\n03:[camisa, bone]:60.00\n04:[bermuda, bermuda]:60.00\n05:[camisa, bermuda, bone]:90.00\n$addDesconto 0 10\n$addDesconto 3 20\n$addDesconto 4 15\n$show\n00:camisa:40.00\n01:bermuda:30.00\n02:bone:20.00\n03:[camisa, bone]:60.00\n04:[bermuda, bermuda]:60.00\n05:[camisa, bermuda, bone]:90.00\n06:camisa(10% OFF):36.00\n07:[camisa, bone](20% OFF):48.00\n08:[bermuda, bermuda](15% OFF):51.00\n$end\n<<<<<<<< FINISH\n\n\n>>>>>>>> INSERT finalizando\nadd camisa 40\nadd bermuda 30\nadd bone 20\nshow\naddPacote 0 2\naddPacote 1 1\naddPacote 0 1 2\nshow\naddDesconto 0 10\naddDesconto 3 20\naddDesconto 4 15\nshow\naddPacote 7 8\naddDesconto 9 10\nshow\nend\n======== EXPECT\n$add camisa 40\n$add bermuda 30\n$add bone 20\n$show\n00:camisa:40.00\n01:bermuda:30.00\n02:bone:20.00\n$addPacote 0 2\n$addPacote 1 1\n$addPacote 0 1 2\n$show\n00:camisa:40.00\n01:bermuda:30.00\n02:bone:20.00\n03:[camisa, bone]:60.00\n04:[bermuda, bermuda]:60.00\n05:[camisa, bermuda, bone]:90.00\n$addDesconto 0 10\n$addDesconto 3 20\n$addDesconto 4 15\n$show\n00:camisa:40.00\n01:bermuda:30.00\n02:bone:20.00\n03:[camisa, bone]:60.00\n04:[bermuda, bermuda]:60.00\n05:[camisa, bermuda, bone]:90.00\n06:camisa(10% OFF):36.00\n07:[camisa, bone](20% OFF):48.00\n08:[bermuda, bermuda](15% OFF):51.00\n$addPacote 7 8\n$addDesconto 9 10\n$show\n00:camisa:40.00\n01:bermuda:30.00\n02:bone:20.00\n03:[camisa, bone]:60.00\n04:[bermuda, bermuda]:60.00\n05:[camisa, bermuda, bone]:90.00\n06:camisa(10% OFF):36.00\n07:[camisa, bone](20% OFF):48.00\n08:[bermuda, bermuda](15% OFF):51.00\n09:[[camisa, bone](20% OFF), [bermuda, bermuda](15% OFF)]:99.00\n10:[[camisa, bone](20% OFF), [bermuda, bermuda](15% OFF)](10% OFF):89.10\n$end\n<<<<<<<< FINISH\n\n",
            "type": "hide"
        }
    ],
    "draft": {
        "ts": [
            {
                "name": "shell.ts",
                "contents": "const input = () => \"\";\nexport {};\n\n",
                "type": "show"
            }
        ]
    }
}
